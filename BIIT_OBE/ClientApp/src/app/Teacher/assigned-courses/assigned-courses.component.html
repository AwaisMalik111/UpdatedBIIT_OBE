<div *ngIf="spinner">
    <div id="loading">
        <div class="loader simple-loader">
          <div class="loader-body"></div>
        </div>
      </div>
</div>
<app-tsidebar></app-tsidebar>
<main class="main-content">
    <app-header></app-header><br>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-2">

        </div>
        <div class="col-md-2">
        </div>
        <div class="col-md-3">

        </div>
        <div class="col-md-2">
        </div>
    </div>
    <br><br>
    <div class="conatiner-fluid content-inner mt-n5 py-0">
        <div class="row">
            <div class="col-md-2 col-lg-2"></div>
            <div class="col-md-10 col-lg-10">
                <br>
                <div class="table-responsive">
                    <table id="datatable" class="table table-striped" data-toggle="data-table">
                        <thead>
                            <tr>
                                <th>Course Title</th>
                                <th>Course Code</th>
                                <th>Section</th>
                                <th>Add Exams</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of details">
                                <td>{{item.course_Title}}</td>
                                <td>{{item.course_Code}}</td>
                                <td>{{item.section}}</td>
                                <td><input (click)="GetCourseDetails(item)" class="btn btn-primary rounded-pill"
                                        data-bs-target="#AddAssessment" data-bs-toggle="offcanvas" type="button"
                                        value="+"></td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer Section Start -->
    <app-footer></app-footer>
    <!-- Footer Section End -->
</main>
<div class="offcanvas offcanvas-end" style="width:80%;" tabindex="-1" id="AddAssessment" data-bs-scroll="true"
    data-bs-backdrop="true" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
        <div class="d-flex align-items-center">
            <h3 class="offcanvas-title me-3" id="offcanvasExampleLabel">Add Exam</h3>
        </div>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body data-scrollbar">
        <div class="row">
            <div class="col-lg-12">
                <hr>
                <div class="row">
                    <div class="form-group col-md-4">
                        <label for="exampleInputPassword1">Course Title : {{title}}</label>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="exampleInputPassword1">Course code : {{code}}</label>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="exampleInputPassword1">Section : {{section}}</label>
                    </div>
                </div>
                <hr>
                <form method="post">
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="exampleInputPassword1">Total Question :</label>
                            <input autocomplete="off" type="text" class="form-control shadow" name="totalQuestions"
                                [(ngModel)]="totalQuestion">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="exampleInputPassword1">Total Marks :</label>
                            <input autocomplete="off" name="totalMark" type="text" class="form-control shadow"
                                [(ngModel)]="totalMark">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label for="exampleInputEmail1">Assessment Type :</label>
                            <select class="form-select shadow" (change)="GetAssignedCLOs()" name="assessment" [(ngModel)]="assessmentType">
                                <option value="Quiz">Quiz</option>
                                <option value="Assignment">Assignment</option>
                                <option value="Lab">Lab</option>
                                <option value="Mid">Mid</option>
                                <option value="Final">Final</option>
                                <option value="Project">Project / Presentation</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <hr>
                        <h5>CLO's Assessment Set By HOD</h5>
                        <hr>
                        <div class="row">
                            <div class="col-md-4"><h5>CLO</h5></div>
                            <div class="col-md-4"><h5>Set Weightage</h5></div>
                            <div class="col-md-2"></div>
                        
                        </div>
                        <div class="row ml-2" *ngFor="let item of AssignCLOSDetail;let idx=index">
                            <div class="col-md-4">
                                <input autocomplete="off" (change)="SelectedCLOsArray(item.assessment_Id,item.clO_Id,idx,$event.target.checked)"
                                    class="form-check-input shadow" type="checkbox" value="">
                                <details>
                                    <summary>CLO{{item.clO_Id}}</summary>
                                    <small>CLO Name : {{item.clO_Name}}</small><br>
                                    <small>CLO Description : {{item.clO_Desc}}</small><br>
                                    <hr>
                                    <p>Assessment Set By HOD : </p>
                                    <hr>
                                    <small>Quiz : {{item.quiz}}%</small><br>
                                    <small>Assignment : {{item.assignment}}%</small><br>
                                    <small>Lab : {{item.lab}}%</small><br>
                                    <small>Project / Presentation : {{item.project}}%</small><br>
                                    <small>Mid : {{item.mid}}%</small><br>
                                    <small>Final : {{item.final}}%</small><br>
                                </details>
                            </div><br><br>
                            <div class="col-md-4">
                                <input type="number" id="{{item.clO_Id}}" disabled (change)="getWeightageArray($event.target.value,item.clO_Id)"
                                    class="form-control shadow" min="0" max="100">
                            </div>
                            <br><br>
                            <div class="col-md-2">
                            </div>
                            <br><br>

                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <button type="button" (click)="AddNewExam()" class="btn btn-primary">Create
                                Exams</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>